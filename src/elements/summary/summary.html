<template>
  <require from="resources/elements/card-properties-list"></require>
  <require from="./cards/action-card.html"></require>
  <require from="./cards/artifact-card.html"></require>
  <require from="./cards/creature-card.html"></require>
  <require from="./cards/upgrade-card.html"></require>
  <require from="./summary.scss"></require>

  <div id="summary-parameters">
    <h3>Parameters</h3>
    <!-- TODO Add size parameters-->

    Group by:
    <select value.bind="groupingProperty">
      <option value="undefined"></option>
      <option repeat.for="property of CardPropertiesEnum" model.bind="getCardPropertyValue(property)">${property}</option>
    </select>

    Sort by:
    <select value.bind="sortingProperty">
      <option value="undefined"></option>
      <option repeat.for="property of CardPropertiesEnum" model.bind="getCardPropertyValue(property)">${property}</option>
    </select>

    <button click.delegate="rebuild()">Refresh</button>
    <button click.delegate="download()">Download</button>
  </div>

  <!-- TODO Add a name tag with the name of the archon and the 3 houses of the deck -->

  <div id="summary-cards" class="summary-sheet">
    <!-- TODO Remove this hardcoded value and allow the user to select an image -->
    <div class="archon-image" style="background-image: url('/images/archon-salvador.png');"></div>
    <div class="float-left container columns">
      <div repeat.for="group of groups">
        <!-- TODO BUG Si 10 actions et 10 artefacts, alors le titre "Creatures" apparaît en haut de la 2è colonne mais sous la première carte créature ! 
        En gros ce bug apparaît si le titre "Creatures" devrait être affiché tout en bas de la 1ère colonne mais qu'il n'y a pas passez de place" -->
        <div class="group-entry">
          <div class="col">
            <span class='group-title'>${getGroupTitle(group)} (${cardsByGroup[group].length})</span>
          </div>
        </div>
        <compose containerless repeat.for="card of cardsByGroup[group]" view-model="./cards/summary-card" view="./cards/${card.type}-card.html" model.bind="card"></compose>
      </div>
    </div>
    <!-- TODO Add a QR code to the deck analyzer in the bottom right corner -->
    <!-- TODO Add the 3 houses of the deck in the bottom right corner -->
  </div>
</template>
