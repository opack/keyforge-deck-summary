<template>
  <require from="resources/elements/card-properties-list"></require>
  <require from="./cards/action-card.html"></require>
  <require from="./cards/artifact-card.html"></require>
  <require from="./cards/creature-card.html"></require>
  <require from="./cards/upgrade-card.html"></require>
  <require from="./summary.css"></require>

  <div id="summary-parameters">
    <h3>Parameters</h3>
    <!-- TODO Add size parameters-->

    Group by:
    <select value.bind="groupingProperty">
      <option value="undefined"></option>
      <option repeat.for="property of CardPropertiesEnum" model.bind="getCardPropertyValue(property)">${property}</option>
    </select>

    Sort by:
    <select value.bind="sortingProperty">
      <option value="undefined"></option>
      <option repeat.for="property of CardPropertiesEnum" model.bind="getCardPropertyValue(property)">${property}</option>
    </select>

    <button click.delegate="rebuild()">Refresh</button>
    <button click.delegate="download()">Download</button>
  </div>

  <div id="summary-cards" class="summary-sheet">
    <!-- TODO Remove this hardcoded value and allow the user to select an image -->
    <div class="archon-image" style="background-image: url('/images/archon-salvador.png');"></div>
    <div class="float-left container columns">
      <div repeat.for="group of groups">
        <div class="row unbreakable-row no-gutters group-entry">
          <div class="col">
            <span class='group-title'>${getGroupTitle(group)} (${cardsByGroup[group].length})</span>
          </div>
        </div>
        <compose containerless repeat.for="card of cardsByGroup[group]" view-model="./cards/summary-card" view="./cards/${card.type}-card.html" model.bind="card"></compose>
      </div>
    </div>
  </div>
</template>
